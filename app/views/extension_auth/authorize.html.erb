<% content_for(:title, "Authorize Tariffik Extension") %>

<div class="min-h-[60vh] flex items-center justify-center">
  <div class="max-w-md w-full space-y-8">
    <div class="text-center">
      <!-- Extension icon -->
      <div class="mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-indigo-100">
        <svg class="h-8 w-8 text-indigo-600" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 16.875h3.375m0 0h3.375m-3.375 0V13.5m0 3.375v3.375M6 10.5h2.25a2.25 2.25 0 002.25-2.25V6a2.25 2.25 0 00-2.25-2.25H6A2.25 2.25 0 003.75 6v2.25A2.25 2.25 0 006 10.5zm0 9.75h2.25A2.25 2.25 0 0010.5 18v-2.25a2.25 2.25 0 00-2.25-2.25H6a2.25 2.25 0 00-2.25 2.25V18A2.25 2.25 0 006 20.25zm9.75-9.75H18a2.25 2.25 0 002.25-2.25V6A2.25 2.25 0 0018 3.75h-2.25A2.25 2.25 0 0013.5 6v2.25a2.25 2.25 0 002.25 2.25z" />
        </svg>
      </div>

      <h2 class="mt-6 text-3xl font-bold tracking-tight text-gray-900">
        Authorize Extension
      </h2>
      <p class="mt-2 text-sm text-gray-600">
        The Tariffik browser extension is requesting access to your account.
      </p>
    </div>

    <div class="bg-white shadow-lg rounded-lg overflow-hidden">
      <div class="px-6 py-8">
        <!-- Permissions -->
        <h3 class="text-lg font-medium text-gray-900 mb-4">This extension will be able to:</h3>
        <ul class="space-y-3">
          <li class="flex items-start">
            <svg class="h-5 w-5 text-green-500 mt-0.5" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <span class="ml-3 text-sm text-gray-700">Look up commodity codes for products you're viewing</span>
          </li>
          <li class="flex items-start">
            <svg class="h-5 w-5 text-green-500 mt-0.5" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <span class="ml-3 text-sm text-gray-700">Save lookups to your Tariffik account</span>
          </li>
          <li class="flex items-start">
            <svg class="h-5 w-5 text-green-500 mt-0.5" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <span class="ml-3 text-sm text-gray-700">Access your subscription-tier lookup limits</span>
          </li>
        </ul>

        <!-- Account info -->
        <div class="mt-6 p-4 bg-gray-50 rounded-lg">
          <p class="text-sm text-gray-600">
            Signing in as <strong class="text-gray-900"><%= current_user.email %></strong>
          </p>
          <p class="text-xs text-gray-500 mt-1">
            Subscription: <span class="capitalize"><%= current_user.subscription_tier %></span>
            <% if current_user.extension_lookups_remaining %>
              (<%= current_user.extension_lookups_remaining %> lookups remaining this month)
            <% else %>
              (Unlimited lookups)
            <% end %>
          </p>
        </div>

        <!-- Action buttons -->
        <div class="mt-6 flex space-x-3">
          <%= form_with url: extension_auth_create_path, method: :post, class: "flex-1" do |f| %>
            <%= f.hidden_field :extension_id, value: @extension_id %>
            <%= f.hidden_field :redirect_uri, value: @redirect_uri %>
            <%= f.submit "Authorize", class: "w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 cursor-pointer" %>
          <% end %>
          <%= link_to "Cancel", root_path, class: "flex-1 flex justify-center py-3 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500" %>
        </div>
      </div>

      <div class="px-6 py-4 bg-gray-50 border-t border-gray-200">
        <p class="text-xs text-gray-500 text-center">
          You can revoke this access at any time from your account settings.
        </p>
      </div>
    </div>
  </div>
</div>
