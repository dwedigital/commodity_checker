#!/bin/bash

# Pre-commit hook to run RuboCop on staged Ruby files

# Get list of staged Ruby files
STAGED_FILES=$(git diff --cached --name-only --diff-filter=ACM | grep '\.rb$')

if [ -z "$STAGED_FILES" ]; then
  exit 0
fi

echo "Running RuboCop on staged files..."

# Run RuboCop only on staged files
bin/rubocop --force-exclusion $STAGED_FILES

if [ $? -ne 0 ]; then
  echo ""
  echo "RuboCop found issues. Fix them before committing."
  echo "Run 'bin/rubocop -A' to auto-fix correctable issues."
  exit 1
fi

exit 0
